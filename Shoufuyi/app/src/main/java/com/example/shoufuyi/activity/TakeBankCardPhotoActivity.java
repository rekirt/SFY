package com.example.shoufuyi.activity;import android.content.Intent;import android.net.Uri;import android.os.Bundle;import android.os.Environment;import android.provider.MediaStore;import android.view.View;import android.widget.Button;import android.widget.ImageView;import com.example.shoufuyi.R;import com.example.shoufuyi.uitls.Constant;import com.example.shoufuyi.uitls.view.CardScanCameraActivity;import java.io.File;import java.text.SimpleDateFormat;import java.util.Date;/** * * Description:用于采集银行卡照片 Created by Fu.H.L on Date:2015-9-22-上午12:52:34 * Copyright © 2015年 Fu.H.L All rights reserved. */public class TakeBankCardPhotoActivity extends BaseActivity {    private String returnAction = "android.intent.action.MAIN";    private String resultAction = "";	protected void onCreate(Bundle savedInstanceState) {		super.onCreate(savedInstanceState);		setContentView(R.layout.activity_take_bankpic);		assignViews();		initData();        setCanBack(true);	}	private ImageView mIvFront;	private ImageView mIvBack;	private Button mBtnUpload;	private void assignViews() {		mIvFront = (ImageView) findViewById(R.id.iv_front);		mIvBack = (ImageView) findViewById(R.id.iv_back);		mBtnUpload = (Button) findViewById(R.id.btn_upload);	}	private void initData() {		mBtnUpload.setOnClickListener(this);		mIvBack.setOnClickListener(this);		mIvFront.setOnClickListener(this);	}	@Override	public void onClick(View arg0) {		switch (arg0.getId()) {            case R.id.btn_upload:                break;            case R.id.iv_front://                photo(TAKE_PICTURE1);                takeBankCardPhoto();                break;            case R.id.iv_back:				takeBankCardPhoto();                break;            default:                break;		}	}    private void takeBankCardPhoto(){        Intent intentTack = new Intent(TakeBankCardPhotoActivity.this, CardScanCameraActivity.class);        intentTack.putExtra("devCode", Constant.devcode);        intentTack.putExtra("CopyrightInfo", "");        intentTack.putExtra("ReturnAciton", returnAction);        intentTack.putExtra("ResultAciton", resultAction);        startActivity(intentTack);    }	private String path;	private String imageName;	private static final int TAKE_PICTURE1 = 0x000001;	private static final int TAKE_PICTURE2 = 0x000002;	public void photo(int TAKE_PICTURE) {		String state = Environment.getExternalStorageState();		path = Environment.getExternalStorageDirectory() + "/" + "SFY/PIC/";		File dir = new File(path);		if (!dir.exists())			dir.mkdirs();		imageName = getTimeName(System.currentTimeMillis()) + ".jpg";		if (state.equals(Environment.MEDIA_MOUNTED)) {			Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);			File f = new File(dir, imageName); // localTempImgDir和localTempImageFileName是自己定义的名字			Uri uri = Uri.fromFile(f);			intent.putExtra(MediaStore.EXTRA_OUTPUT, uri);			intent.putExtra(MediaStore.EXTRA_SCREEN_ORIENTATION, 1);			startActivityForResult(intent, TAKE_PICTURE);		}	}	public static String getTimeName(long time) {		SimpleDateFormat formatter = new SimpleDateFormat("yyyyMMddHHmmss");		Date date = new Date(time);		return formatter.format(date);	}	@Override	protected void onDestroy() {		super.onDestroy();	}}